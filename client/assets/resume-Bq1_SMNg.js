import{o as e,a as i,w as L,A as T,v as $,t as U}from"./chunk-QMGIS6GS-DX0VMMAr.js";import{u as B}from"./puter-D5fpqPPq.js";import{c as k}from"./utils-CLdLQqWL.js";const G=({score:s,suggestions:t})=>{const r=s>69?"/icons/ats-good.svg":s>49?"/icons/ats-warning.svg":"/icons/ats-bad.svg",a=s>69?"Great Job!":s>49?"Good Start":"Needs Improvement";return e.jsxs("div",{className:`bg-blue-500/10 backdrop-blur-xl\r
      border border-blue-400/20 \r
      rounded-2xl shadow-lg w-full p-6\r
      text-gray-100`,children:[e.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[e.jsx("img",{src:r,alt:"ATS Score Icon",className:"w-12 h-12"}),e.jsx("div",{children:e.jsxs("h2",{className:"text-2xl font-bold",children:["ATS Score - ",s,"/100"]})})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-2",children:a}),e.jsx("p",{className:"text-gray-200/80 mb-4",children:"This score represents how well your resume is likely to perform in Applicant Tracking Systems used by employers."}),e.jsx("div",{className:"space-y-3",children:t.map((l,c)=>e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("img",{src:l.type==="good"?"/icons/check.svg":"/icons/warning.svg",alt:l.type==="good"?"Check":"Warning",className:"w-5 h-5 mt-1 opacity-90"}),e.jsx("p",{className:l.type==="good"?"text-gray-100":"text-red-300",children:l.tip})]},c))})]}),e.jsx("p",{className:"text-gray-200/70 italic",children:"Keep refining your resume to improve your chances of getting past ATS filters and into the hands of recruiters."})]})},A=i.createContext(void 0),C=()=>{const s=i.useContext(A);if(!s)throw new Error("Accordion components must be used within an Accordion");return s},E=({children:s,defaultOpen:t,allowMultiple:r=!1,className:a=""})=>{const[l,c]=i.useState(t?[t]:[]),x=n=>{c(o=>r?o.includes(n)?o.filter(b=>b!==n):[...o,n]:o.includes(n)?[]:[n])},d=n=>l.includes(n);return e.jsx(A.Provider,{value:{activeItems:l,toggleItem:x,isItemActive:d},children:e.jsx("div",{className:`space-y-2 ${a}`,children:s})})},g=({id:s,children:t,className:r=""})=>e.jsx("div",{className:`overflow-hidden border-b border-gray-200 ${r}`,children:t}),u=({itemId:s,children:t,className:r="",icon:a,iconPosition:l="right"})=>{const{toggleItem:c,isItemActive:x}=C(),d=x(s),n=e.jsx("svg",{className:k("w-5 h-5 transition-transform duration-200",{"rotate-180":d}),fill:"none",stroke:"#98A2B3",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})}),o=()=>{c(s)};return e.jsxs("button",{onClick:o,className:`
        w-full px-4 py-3 text-left
        focus:outline-none
        transition-colors duration-200 flex items-center justify-between cursor-pointer
        ${r}
      `,children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[l==="left"&&(a||n),e.jsx("div",{className:"flex-1",children:t})]}),l==="right"&&(a||n)]})},h=({itemId:s,children:t,className:r=""})=>{const{isItemActive:a}=C(),l=a(s);return e.jsx("div",{className:`
        overflow-hidden transition-all duration-300 ease-in-out
        ${l?"max-h-fit opacity-100":"max-h-0 opacity-0"}
        ${r}
      `,children:e.jsx("div",{className:"px-4 py-3 ",children:t})})},P=({score:s})=>e.jsxs("div",{className:k("flex flex-row gap-1 items-center px-2 py-0.5 rounded-[96px] border backdrop-blur-md",s>69?"bg-blue-100/70 border-blue-200 text-blue-800":s>39?"bg-indigo-100/70 border-indigo-200 text-indigo-800":"bg-slate-200/70 border-slate-300 text-slate-800"),children:[e.jsx("img",{src:s>69?"/icons/check.svg":"/icons/warning.svg",alt:"score",className:"size-4"}),e.jsxs("p",{className:"text-sm font-medium",children:[s,"/100"]})]}),f=({title:s,categoryScore:t})=>e.jsxs("div",{className:"flex flex-row gap-4 items-center py-2",children:[e.jsx("p",{className:"text-2xl font-semibold",children:s}),e.jsx(P,{score:t})]}),j=({tips:s})=>e.jsxs("div",{className:"flex flex-col gap-6 w-full",children:[e.jsx("div",{className:"bg-gray-900/80 w-full rounded-xl p-1 grid grid-cols-2 gap-3 border border-gray-800",children:s.map((t,r)=>e.jsx("div",{className:`flex flex-col gap-2 rounded-xl p-3 
              ${t.type==="good"?"bg-emerald-600/30 border border-emerald-400":"bg-red-400/30 border border-red-300"}
              transition-all hover:bg-opacity-70 hover:shadow-lg`,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("img",{src:t.type==="good"?"/icons/check.svg":"/icons/warning.svg",alt:"score",className:"size-4 filter brightness-0 invert opacity-90"}),e.jsx("span",{className:"font-medium text-white",children:t.tip})]})},r+t.tip))}),e.jsx("div",{className:"flex flex-col gap-3 w-full bg-gray-900/50 p-4 rounded-xl border border-gray-800",children:s.map((t,r)=>e.jsxs("div",{className:`flex flex-col gap-3 rounded-xl p-4 border transition-all hover:shadow-lg
              ${t.type==="good"?"bg-emerald-700/40 border-emerald-500 hover:bg-emerald-700/60":"bg-red-400/40 border-red-300 hover:bg-red-400/60"}`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`p-2 rounded-lg ${t.type==="good"?"bg-emerald-600":"bg-red-400"}`,children:e.jsx("img",{src:t.type==="good"?"/icons/check.svg":"/icons/warning.svg",alt:"score",className:"size-5 filter brightness-0 invert"})}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:t.tip})]}),e.jsx("p",{className:"text-base  leading-relaxed pl-[52px]",children:t.explanation})]},r+t.tip))})]}),W=({feedback:s})=>e.jsx("div",{className:"flex flex-col gap-4 w-full",children:e.jsxs(E,{children:[e.jsxs(g,{id:"tone-style",children:[e.jsx(u,{itemId:"tone-style",children:e.jsx(f,{title:"Tone & Style",categoryScore:s.toneAndStyle.score})}),e.jsx(h,{itemId:"tone-style",children:e.jsx(j,{tips:s.toneAndStyle.tips})})]}),e.jsxs(g,{id:"content",children:[e.jsx(u,{itemId:"content",children:e.jsx(f,{title:"Content",categoryScore:s.content.score})}),e.jsx(h,{itemId:"content",children:e.jsx(j,{tips:s.content.tips})})]}),e.jsxs(g,{id:"structure",children:[e.jsx(u,{itemId:"structure",children:e.jsx(f,{title:"Structure",categoryScore:s.structure.score})}),e.jsx(h,{itemId:"structure",children:e.jsx(j,{tips:s.structure.tips})})]}),e.jsxs(g,{id:"skills",children:[e.jsx(u,{itemId:"skills",children:e.jsx(f,{title:"Skills",categoryScore:s.skills.score})}),e.jsx(h,{itemId:"skills",children:e.jsx(j,{tips:s.skills.tips})})]})]})}),z=({score:s=75})=>{const[t,r]=i.useState(0),a=i.useRef(null),l=s/100;return i.useEffect(()=>{a.current&&r(a.current.getTotalLength())},[]),e.jsx("div",{className:"flex flex-col items-center",children:e.jsxs("div",{className:"relative w-40 h-20",children:[e.jsxs("svg",{viewBox:"0 0 100 50",className:"w-full h-full",children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"gaugeGradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"0%",stopColor:"#a78bfa"}),e.jsx("stop",{offset:"100%",stopColor:"#fca5a5"})]})}),e.jsx("path",{d:"M10,50 A40,40 0 0,1 90,50",fill:"none",stroke:"#e5e7eb",strokeWidth:"10",strokeLinecap:"round"}),e.jsx("path",{ref:a,d:"M10,50 A40,40 0 0,1 90,50",fill:"none",stroke:"url(#gaugeGradient)",strokeWidth:"10",strokeLinecap:"round",strokeDasharray:t,strokeDashoffset:t*(1-l)})]}),e.jsx("div",{className:"absolute inset-0 flex flex-col items-center justify-center pt-2",children:e.jsxs("div",{className:"text-xl font-semibold pt-4",children:[s,"/100"]})})]})})},D=({score:s})=>{let t="",r="";return s>70?(t="bg-badge-green text-green-600",r="Strong"):s>49?(t="bg-badge-yellow text-yellow-600",r="Good Start"):(t="bg-badge-red text-red-600",r="Needs Work"),e.jsx("div",{className:`px-3 py-1 rounded-full ${t}`,children:e.jsx("p",{className:"text-sm font-medium",children:r})})},p=({title:s,score:t})=>{const r=t>70?"text-blue-400":t>49?"text-indigo-400":"text-rose-400",a=t>70?"bg-blue-500/10":t>49?"bg-indigo-500/10":"bg-rose-500/10";return e.jsxs("div",{className:`flex items-center justify-between px-5 py-4 rounded-xl ${a} transition-all hover:scale-[1.02] hover:shadow-md`,children:[e.jsxs("div",{className:"flex flex-row gap-2 items-center",children:[e.jsx("p",{className:"text-lg font-medium text-gray-100",children:s}),e.jsx(D,{score:t})]}),e.jsxs("p",{className:"text-lg font-semibold",children:[e.jsx("span",{className:r,children:t}),e.jsx("span",{className:"text-gray-400",children:"/100"})]})]})},H=({feedback:s})=>e.jsxs("div",{className:`rounded-2xl w-full overflow-hidden \r
                    bg-gradient-to-br from-gray-800 via-gray-850 to-gray-900 \r
                    shadow-2xl border border-gray-700`,children:[e.jsxs("div",{className:"flex flex-row items-center p-6 gap-6 border-b border-gray-700",children:[e.jsx(z,{score:s.overallScore}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("h2",{className:"text-3xl font-extrabold text-white tracking-tight",children:"Your Resume Score"}),e.jsx("p",{className:"text-sm text-gray-400 mt-2",children:"This score is calculated based on the categories below."})]})]}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsx(p,{title:"Tone & Style",score:s.toneAndStyle.score}),e.jsx(p,{title:"Content",score:s.content.score}),e.jsx(p,{title:"Structure",score:s.structure.score}),e.jsx(p,{title:"Skills",score:s.skills.score})]})]}),Y=()=>[{title:"Resumify | Review"},{name:"description",content:"Resume review and feedback"}],M=()=>{const{auth:s,isLoading:t,fs:r,kv:a}=B(),{id:l}=T(),[c,x]=i.useState(""),[d,n]=i.useState(""),[o,b]=i.useState(null),I=$();return i.useEffect(()=>{!t&&!s.isAuthenticated&&I(`/auth?next=/resume/${l}`)},[t]),i.useEffect(()=>{(async()=>{const v=await a.get(`resume:${l}`);if(!v)return;const m=JSON.parse(v),y=await r.read(m.resumePath);if(!y)return;const R=new Blob([y],{type:"application/pdf"}),N=URL.createObjectURL(R);n(N);const w=await r.read(m.imagePath);if(!w)return;const S=URL.createObjectURL(w);x(S),b(m.feedback),console.log({resumeUrl:N,imageUrl:S,feedback:m.feedback})})()},[l]),e.jsxs("main",{className:"!pt-0",children:[e.jsx("nav",{className:"resume-nav",children:e.jsxs(U,{to:"/",className:"back-button",children:[e.jsx("img",{src:"/icons/back.svg",alt:"logo",className:"w2.5 h2.5 invert brightness-0 "}),e.jsx("span",{className:"text-white text-sm font-semibold",children:" Back to Homepage"})]})}),e.jsxs("div",{className:"flex flex-row w-full max-lg:flex-col-reverse",children:[e.jsx("section",{className:"feedback-section bg-[url('/images/bg-small.svg') bg-cover h-[100vh] sticky top-0 items-center justify-center]",children:c&&d&&e.jsx("div",{className:"animate-in fade-in duration-1000 gradient-border max-sm:m-0 h-[90%] max-wxl:h-fit w-fit",children:e.jsx("a",{href:d,target:"_blank",children:e.jsx("img",{src:c,className:"w-full h-full object-contain rounded-2xl",title:"resume"})})})}),e.jsxs("section",{className:"feedback-section",children:[e.jsx("h2",{className:"text-4xl !text-white font-bold",children:"Resume Analysis"}),o?e.jsxs("div",{className:"flex flex-col gap-8 animate-in fade-in duration-1000 text-white",children:[e.jsx(H,{feedback:o}),e.jsx(G,{score:o.ATS.score||0,suggestions:o.ATS.tips||[]}),e.jsx(W,{feedback:o})]}):e.jsx("img",{src:"/images/resume-scan-2.gif",className:"w-full",alt:"img loading"})]})]})]})},_=L(M);export{_ as default,Y as meta};
